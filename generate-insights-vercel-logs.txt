2025-10-13T22:07:31.067Z [info] [InsightsAPI] Handler called - method: POST
2025-10-13T22:07:31.067Z [info] [InsightsAPI] Analyzing project: latest-upload-1760393250949 with team capacity: 80
2025-10-13T22:07:31.067Z [info] [InsightsAPI] Initializing ActionableInsightEngine with database access...
2025-10-13T22:07:31.067Z [info] [FileValidator] Initialized with project root:
2025-10-13T22:07:31.067Z [info] [InsightsAPI] Loading project data from database...
2025-10-13T22:07:31.067Z [info] [ActionableInsightEngine] Loading project context for ID: latest-upload-1760393250949
2025-10-13T22:07:31.683Z [info] [ActionableInsightEngine] Loaded 200 total files from database
2025-10-13T22:07:31.684Z [info] [ActionableInsightEngine] Found 14 files from most recent upload batch
2025-10-13T22:07:32.107Z [info] [ActionableInsightEngine] Loaded from database: { files: 200, functions: 1000, types: 1000 }
2025-10-13T22:07:32.107Z [info] [ActionableInsightEngine] Built complete InsightContext with full file content
2025-10-13T22:07:32.107Z [info] [InsightsAPI] Project context loaded: { filesCount: 200, functionsCount: 1000, dependenciesCount: 0 }
2025-10-13T22:07:32.107Z [info] [InsightsAPI] Calling analyzeAndPlan...
2025-10-13T22:07:32.107Z [info] [ActionableInsightEngine] Starting analyzeAndPlan with context: {
  filesCount: 200,
  functionsCount: 1000,
  dependenciesCount: 0,
  teamCapacity: 80
}
2025-10-13T22:07:32.107Z [info] [ActionableInsightEngine] Calling engine.generateInsights...
2025-10-13T22:07:32.107Z [info] [InsightEngine] Starting generateInsights with 6 detectors
2025-10-13T22:07:32.107Z [info] [InsightEngine] Project root detected: .
2025-10-13T22:07:32.107Z [info] [FileValidator] Initialized with project root: .
2025-10-13T22:07:32.107Z [info] [FileValidator] Initialized with 200 files, storing 600 path variations
2025-10-13T22:07:32.107Z [info] [FileValidator] Sample paths: [
  'components/ui/menubar.tsx',
  '/var/task/components/ui/menubar.tsx',
  'components/ui/input.tsx',
  '/var/task/components/ui/input.tsx',
  'components/ui/alert.tsx'
]
2025-10-13T22:07:32.107Z [info] [InsightEngine] Phase 1: Running 6 detectors...
2025-10-13T22:07:32.107Z [info] [InsightEngine] Running detector 1: I
2025-10-13T22:07:32.110Z [info] [InsightEngine] Running detector 2: P
2025-10-13T22:07:32.135Z [info] [CodeClassifier] Classified 200 files:
2025-10-13T22:07:32.135Z [info] Production: 64
2025-10-13T22:07:32.135Z [info] Test: 125
2025-10-13T22:07:32.135Z [info] Example: 5
2025-10-13T22:07:32.135Z [info] Build: 0
2025-10-13T22:07:32.135Z [info] Config: 6
2025-10-13T22:07:32.135Z [info] Documentation: 0
2025-10-13T22:07:32.161Z [info] [CodeClassifier] Classified 200 files:
2025-10-13T22:07:32.161Z [info] Production: 64
2025-10-13T22:07:32.161Z [info] Test: 125
2025-10-13T22:07:32.161Z [info] Example: 5
2025-10-13T22:07:32.161Z [info] Build: 0
2025-10-13T22:07:32.161Z [info] Config: 6
2025-10-13T22:07:32.161Z [info] Documentation: 0
2025-10-13T22:07:32.161Z [info] [SmartSecurityAnalyzer] Analyzing 64 production files (skipping 136 non-production files)
2025-10-13T22:07:32.161Z [info] [InsightEngine] Running detector 3: E
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping components/ui/menubar.tsx: UI component library with multiple related components
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping components/ui/input.tsx: UI component library with multiple related components
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping components/ui/alert.tsx: UI component library with multiple related components
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping components/ui/alert-dialog.tsx: UI component library with multiple related components
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping components/ui/accordion.tsx: UI component library with multiple related components
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping app/users/page.tsx: nextjs framework convention
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping app/page.tsx: nextjs framework convention
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping app/not-found.tsx: nextjs framework convention
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping app/loading.tsx: nextjs framework convention
2025-10-13T22:07:32.162Z [info] [GodObjectDetector] Skipping app/layout.tsx: nextjs framework convention
2025-10-13T22:07:32.163Z [info] [GodObjectDetector] Skipping app/error.tsx: nextjs framework convention
2025-10-13T22:07:32.163Z [info] [GodObjectDetector] Skipping app/create-user/page.tsx: nextjs framework convention
2025-10-13T22:07:32.163Z [info] [GodObjectDetector] Skipping app/auth/register/page.tsx: nextjs framework convention
2025-10-13T22:07:32.163Z [info] [GodObjectDetector] Skipping app/auth/login/page.tsx: nextjs framework convention
2025-10-13T22:07:32.163Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.164Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.164Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.164Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.166Z [info] [GodObjectDetector] Flagging dashboard.tsx: 39 functions (threshold: 30)
2025-10-13T22:07:32.166Z [info] [GodObjectDetector] Flagging intelligence-test.ts: 34 functions (threshold: 30)
2025-10-13T22:07:32.166Z [info] [GodObjectDetector] Skipping types.ts: UI component library with multiple related components
2025-10-13T22:07:32.166Z [info] [GodObjectDetector] Skipping plugin-manager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.167Z [info] [GodObjectDetector] Skipping file-generator.ts: UI component library with multiple related components
2025-10-13T22:07:32.168Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.168Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.168Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.168Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.169Z [info] [GodObjectDetector] Flagging dashboard.tsx: 39 functions (threshold: 30)
2025-10-13T22:07:32.170Z [info] [GodObjectDetector] Flagging intelligence-test.ts: 34 functions (threshold: 30)
2025-10-13T22:07:32.171Z [info] [GodObjectDetector] Flagging health-predictor.ts: 47 functions (threshold: 30)
2025-10-13T22:07:32.171Z [info] [GodObjectDetector] Flagging pattern-detector.ts: 55 functions (threshold: 30)
2025-10-13T22:07:32.172Z [info] [GodObjectDetector] Flagging engine.ts: 112 functions (threshold: 30)
2025-10-13T22:07:32.172Z [info] [GodObjectDetector] Flagging architecture-analyzer.ts: 65 functions (threshold: 30)
2025-10-13T22:07:32.173Z [info] [GodObjectDetector] Flagging smell-detector.ts: 44 functions (threshold: 30)
2025-10-13T22:07:32.173Z [info] [GodObjectDetector] Flagging typescript.ts: 68 functions (threshold: 30)
2025-10-13T22:07:32.174Z [info] [GodObjectDetector] Skipping types.ts: UI component library with multiple related components
2025-10-13T22:07:32.174Z [info] [GodObjectDetector] Skipping plugin-manager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.174Z [info] [GodObjectDetector] Skipping file-generator.ts: UI component library with multiple related components
2025-10-13T22:07:32.175Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.175Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.175Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.176Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.177Z [info] [GodObjectDetector] Flagging dashboard.tsx: 39 functions (threshold: 30)
2025-10-13T22:07:32.177Z [info] [GodObjectDetector] Flagging intelligence-test.ts: 34 functions (threshold: 30)
2025-10-13T22:07:32.178Z [info] [GodObjectDetector] Flagging health-predictor.ts: 47 functions (threshold: 30)
2025-10-13T22:07:32.178Z [info] [GodObjectDetector] Flagging pattern-detector.ts: 55 functions (threshold: 30)
2025-10-13T22:07:32.179Z [info] [GodObjectDetector] Flagging engine.ts: 112 functions (threshold: 30)
2025-10-13T22:07:32.179Z [info] [GodObjectDetector] Flagging architecture-analyzer.ts: 65 functions (threshold: 30)
2025-10-13T22:07:32.180Z [info] [GodObjectDetector] Flagging smell-detector.ts: 44 functions (threshold: 30)
2025-10-13T22:07:32.180Z [info] [GodObjectDetector] Flagging typescript.ts: 68 functions (threshold: 30)
2025-10-13T22:07:32.180Z [info] [GodObjectDetector] Skipping types.ts: UI component library with multiple related components
2025-10-13T22:07:32.181Z [info] [GodObjectDetector] Skipping plugin-manager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.181Z [info] [GodObjectDetector] Skipping file-generator.ts: UI component library with multiple related components
2025-10-13T22:07:32.181Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.181Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.182Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.182Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.183Z [info] [GodObjectDetector] Flagging dashboard.tsx: 39 functions (threshold: 30)
2025-10-13T22:07:32.183Z [info] [GodObjectDetector] Flagging intelligence-test.ts: 34 functions (threshold: 30)
2025-10-13T22:07:32.184Z [info] [GodObjectDetector] Flagging health-predictor.ts: 47 functions (threshold: 30)
2025-10-13T22:07:32.188Z [info] [GodObjectDetector] Flagging pattern-detector.ts: 55 functions (threshold: 30)
2025-10-13T22:07:32.193Z [info] [GodObjectDetector] Flagging engine.ts: 112 functions (threshold: 30)
2025-10-13T22:07:32.194Z [info] [GodObjectDetector] Flagging architecture-analyzer.ts: 65 functions (threshold: 30)
2025-10-13T22:07:32.194Z [info] [GodObjectDetector] Flagging smell-detector.ts: 44 functions (threshold: 30)
2025-10-13T22:07:32.194Z [info] [GodObjectDetector] Flagging typescript.ts: 68 functions (threshold: 30)
2025-10-13T22:07:32.195Z [info] [GodObjectDetector] Skipping types.ts: UI component library with multiple related components
2025-10-13T22:07:32.195Z [info] [GodObjectDetector] Skipping plugin-manager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.195Z [info] [GodObjectDetector] Skipping file-generator.ts: UI component library with multiple related components
2025-10-13T22:07:32.195Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.196Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.196Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.196Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.196Z [info] [GodObjectDetector] Skipping auth.router.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.196Z [info] [GodObjectDetector] Skipping document.router.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.197Z [info] [GodObjectDetector] Skipping user.router.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.197Z [info] [GodObjectDetector] Skipping api.test.ts: Generated or tool-specific file
2025-10-13T22:07:32.197Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.200Z [info] [GodObjectDetector] Skipping ThreadManager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.200Z [info] [GodObjectDetector] Skipping StateManager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.203Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.203Z [info] [GodObjectDetector] Skipping constants.ts: UI component library with multiple related components
2025-10-13T22:07:32.203Z [info] [GodObjectDetector] Skipping ArtifactStorageManager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.208Z [info] [GodObjectDetector] Flagging dashboard.tsx: 39 functions (threshold: 30)
2025-10-13T22:07:32.209Z [info] [GodObjectDetector] Flagging intelligence-test.ts: 34 functions (threshold: 30)
2025-10-13T22:07:32.209Z [info] [GodObjectDetector] Flagging health-predictor.ts: 47 functions (threshold: 30)
2025-10-13T22:07:32.209Z [info] [GodObjectDetector] Flagging pattern-detector.ts: 55 functions (threshold: 30)
2025-10-13T22:07:32.210Z [info] [GodObjectDetector] Flagging engine.ts: 112 functions (threshold: 30)
2025-10-13T22:07:32.210Z [info] [GodObjectDetector] Flagging architecture-analyzer.ts: 65 functions (threshold: 30)
2025-10-13T22:07:32.210Z [info] [GodObjectDetector] Flagging smell-detector.ts: 44 functions (threshold: 30)
2025-10-13T22:07:32.211Z [info] [GodObjectDetector] Flagging typescript.ts: 68 functions (threshold: 30)
2025-10-13T22:07:32.211Z [info] [GodObjectDetector] Skipping types.ts: UI component library with multiple related components
2025-10-13T22:07:32.211Z [info] [GodObjectDetector] Skipping plugin-manager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.211Z [info] [GodObjectDetector] Skipping file-generator.ts: UI component library with multiple related components
2025-10-13T22:07:32.211Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.211Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.212Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging dashboard.tsx: 39 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging intelligence-test.ts: 34 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging health-predictor.ts: 47 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging pattern-detector.ts: 55 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging engine.ts: 112 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging architecture-analyzer.ts: 65 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging smell-detector.ts: 44 functions (threshold: 30)
2025-10-13T22:07:32.215Z [info] [GodObjectDetector] Flagging typescript.ts: 68 functions (threshold: 30)
2025-10-13T22:07:32.216Z [info] [GodObjectDetector] Skipping types.ts: UI component library with multiple related components
2025-10-13T22:07:32.219Z [info] [GodObjectDetector] Skipping plugin-manager.ts: Service layer with expected CRUD operations
2025-10-13T22:07:32.219Z [info] [GodObjectDetector] Skipping file-generator.ts: UI component library with multiple related components
2025-10-13T22:07:32.219Z [info] [GodObjectDetector] Flagging analyze.ts: 38 functions (threshold: 30)
2025-10-13T22:07:32.219Z [info] [GodObjectDetector] Skipping index.ts: UI component library with multiple related components
2025-10-13T22:07:32.220Z [info] [GodObjectDetector] Flagging supabase.ts: 56 functions (threshold: 30)
2025-10-13T22:07:32.220Z [info] [GodObjectDetector] Flagging api.ts: 58 functions (threshold: 30)
2025-10-13T22:07:32.220Z [info] [InsightEngine] Running detector 4: R
2025-10-13T22:07:32.290Z [info] [InsightEngine] Running detector 5: $
2025-10-13T22:07:32.290Z [info] [InsightEngine] Running detector 6: S
2025-10-13T22:07:32.290Z [info] [InsightEngine] Detector 1 found 1 insights
2025-10-13T22:07:32.291Z [info] [InsightEngine] Detector 3 found 3 insights
2025-10-13T22:07:32.291Z [info] [InsightEngine] Detector 4 found 1 insights
2025-10-13T22:07:32.291Z [info] [InsightEngine] Detector 5 found 0 insights
2025-10-13T22:07:32.291Z [info] [InsightEngine] Detector 6 found 1 insights
2025-10-13T22:07:32.322Z [info] [CodeClassifier] Classified 200 files:
2025-10-13T22:07:32.322Z [info] Production: 64
2025-10-13T22:07:32.322Z [info] Test: 125
2025-10-13T22:07:32.322Z [info] Example: 5
2025-10-13T22:07:32.322Z [info] Build: 0
2025-10-13T22:07:32.322Z [info] Config: 6
2025-10-13T22:07:32.322Z [info] Documentation: 0
2025-10-13T22:07:32.322Z [info] [SecurityInsightDetector] Smart analysis complete: 0 real issues found (136 test files skipped)
2025-10-13T22:07:32.322Z [info] [InsightEngine] Detector 2 found 0 insights
2025-10-13T22:07:32.322Z [info] [InsightEngine] Phase 1 complete: 6 insights from detectors
2025-10-13T22:07:32.322Z [info] [InsightEngine] Phase 2: Running enhanced quality analysis...
2025-10-13T22:07:32.323Z [info] [InsightEngine] Running enhanced quality analysis on: .
2025-10-13T22:07:32.329Z [info] Found 3 TypeScript files to analyze
2025-10-13T22:07:33.166Z [info] Processed 3/3 files
2025-10-13T22:07:33.459Z [info] Extraction complete: {
  filesProcessed: 3,
  functionsExtracted: 24556,
  typesExtracted: 4539,
  errors: []
}
2025-10-13T22:07:33.489Z [warning] Import parsing may be incomplete for pages/_app.tsx: found 3 potential imports but parsed 2
2025-10-13T22:07:33.490Z [warning] Import parsing may be incomplete for src/services/missing-file-generator.ts: found 4 potential imports but parsed 3
2025-10-13T22:07:33.528Z [info] [InsightEngine] Enhanced quality analysis found 6 insights
2025-10-13T22:07:33.528Z [info] [InsightEngine] Phase 2 complete: 6 quality insights added
2025-10-13T22:07:33.529Z [info] [InsightEngine] Phase 2.1: Running tRPC route lifecycle analysis...
2025-10-13T22:07:33.529Z [info] [InsightEngine] Starting tRPC route lifecycle analysis...
2025-10-13T22:07:33.810Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/register",
  "lifecycle_name": "register",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:33.809Z",
  "version": "1.0"
}
2025-10-13T22:07:33.907Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/login",
  "lifecycle_name": "login",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:33.907Z",
  "version": "1.0"
}
2025-10-13T22:07:34.153Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/me",
  "lifecycle_name": "me",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.153Z",
  "version": "1.0"
}
2025-10-13T22:07:34.254Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/create",
  "lifecycle_name": "create",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.254Z",
  "version": "1.0"
}
2025-10-13T22:07:34.361Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/getById",
  "lifecycle_name": "getById",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.361Z",
  "version": "1.0"
}
2025-10-13T22:07:34.464Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/list",
  "lifecycle_name": "list",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.463Z",
  "version": "1.0"
}
2025-10-13T22:07:34.577Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/cancel",
  "lifecycle_name": "cancel",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.576Z",
  "version": "1.0"
}
2025-10-13T22:07:34.690Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/getProgress",
  "lifecycle_name": "getProgress",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.689Z",
  "version": "1.0"
}
2025-10-13T22:07:34.798Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/getProfile",
  "lifecycle_name": "getProfile",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.797Z",
  "version": "1.0"
}
2025-10-13T22:07:34.897Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/updateProfile",
  "lifecycle_name": "updateProfile",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.897Z",
  "version": "1.0"
}
2025-10-13T22:07:34.996Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/changePassword",
  "lifecycle_name": "changePassword",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:34.996Z",
  "version": "1.0"
}
2025-10-13T22:07:35.094Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/updatePreferences",
  "lifecycle_name": "updatePreferences",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:35.094Z",
  "version": "1.0"
}
2025-10-13T22:07:35.190Z [info] 📊 CAPTURED LIFECYCLE: {
  "request_path": "POST /api/trpc//api/trpc/getStatistics",
  "lifecycle_name": "getStatistics",
  "framework_type": "trpc",
  "steps": [
    {
      "stepNumber": 1,
      "stepName": "Database Query: SELECT",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 294,
      "lineEnd": 312,
      "functionName": "getFiles",
      "operations": [
        "database_query",
        "data_transformation"
      ],
      "externalCalls": [
        {
          "service": "supabase",
          "method": "from().select().eq()",
          "table": "codebase_files",
          "details": {
            "primaryQuery": "purpose = contextId",
            "fallbackPatterns": [
              "ai-first/contextId/%",
              "%contextId%",
              "contextId/%"
            ]
          }
        }
      ],
      "errorConditions": [
        {
          "condition": "database_error",
          "statusCode": 500,
          "retryPolicy": "none"
        }
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Retrieving files for contextId: ${contextId}",
        "[AI-FIRST DEBUG] Primary query result: ${result}",
        "[AI-FIRST DEBUG] Using fallback pattern: ${pattern}"
      ],
      "metrics": [
        "query_duration",
        "rows_returned",
        "cache_hit_rate"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    },
    {
      "stepNumber": 2,
      "stepName": "Response Transformation",
      "triggerType": "function_call",
      "filePath": "server/trpc/routers/ai-first.router.ts",
      "lineStart": 371,
      "lineEnd": 378,
      "functionName": "transformFilesToGeneratedFiles",
      "operations": [
        "data_transformation",
        "serialization"
      ],
      "logPatterns": [
        "[AI-FIRST DEBUG] Returning ${count} files from fallback",
        "[AI-FIRST DEBUG] Final result: ${result}"
      ],
      "metrics": [
        "transform_duration",
        "response_size"
      ],
      "traceHeaders": [
        "x-trace-id",
        "x-request-id"
      ]
    }
  ],
  "captured_at": "2025-10-13T22:07:35.190Z",
  "version": "1.0"
}
2025-10-13T22:07:35.190Z [info] [InsightEngine] Found 1 route insights
2025-10-13T22:07:35.191Z [info] [InsightEngine] Converted 1 route insights to actionable format
2025-10-13T22:07:35.191Z [info] [InsightEngine] Phase 2.1 complete: 1 route insights added
2025-10-13T22:07:35.191Z [info] [InsightEngine] Phase 2.2: Running tRPC-specific insight detection...
2025-10-13T22:07:35.191Z [info] [InsightEngine] Starting tRPC-specific pattern analysis...
2025-10-13T22:07:35.220Z [info] [CodeClassifier] Classified 200 files:
2025-10-13T22:07:35.220Z [info] Production: 64
2025-10-13T22:07:35.220Z [info] Test: 125
2025-10-13T22:07:35.220Z [info] Example: 5
2025-10-13T22:07:35.220Z [info] Build: 0
2025-10-13T22:07:35.228Z [info] Config: 6
2025-10-13T22:07:35.228Z [info] Documentation: 0
2025-10-13T22:07:35.230Z [info] [InsightEngine] Found 22 tRPC-specific insights
2025-10-13T22:07:35.230Z [info] [InsightEngine] Phase 2.2 complete: 22 tRPC-specific insights added
2025-10-13T22:07:35.230Z [info] [InsightEngine] Phase 3.1: Running business context enrichment...
2025-10-13T22:07:35.230Z [info] [InsightEngine] Starting business context enrichment...
2025-10-13T22:07:35.404Z [info] [InsightEngine] Business enrichment complete:
2025-10-13T22:07:35.404Z [info] Domains: 8
2025-10-13T22:07:35.404Z [info] Layers: 5
2025-10-13T22:07:35.404Z [info] High-value functions: 0
2025-10-13T22:07:35.404Z [info] Business entities: 0
2025-10-13T22:07:35.404Z [info] [InsightEngine] Phase 3.1 complete: 3 business insights added
2025-10-13T22:07:35.404Z [info] [InsightEngine] Enriching with business context...
2025-10-13T22:07:35.404Z [info] [InsightEngine] Enriching 38 insights with business context...
2025-10-13T22:07:35.578Z [info] [InsightEngine] Business context: 8 domains, 5 layers
2025-10-13T22:07:35.578Z [info] [InsightEngine] Business context enrichment complete
2025-10-13T22:07:35.578Z [info] [InsightEngine] Calculating priorities...
2025-10-13T22:07:35.578Z [info] [InsightEngine] Priority calculation complete
2025-10-13T22:07:35.578Z [info] [InsightEngine] Deduplicating 38 insights...
2025-10-13T22:07:35.578Z [info] [InsightEngine] Deduplication complete: 19 unique insights
2025-10-13T22:07:35.578Z [info] [InsightEngine] Phase 5: Deduplicating similar insights...
2025-10-13T22:07:35.578Z [info] [Deduplicator] Starting deduplication of 19 insights
2025-10-13T22:07:35.590Z [info] [Deduplicator] Created 16 groups, average size: 1.2
2025-10-13T22:07:35.590Z [info] [Deduplicator] Reduced 19 insights to 16 (16% reduction)
2025-10-13T22:07:35.590Z [info] [InsightEngine] Deduplication: 19 → 16 (16% reduction)
2025-10-13T22:07:35.590Z [info] [InsightEngine] Phase 6: Validating file references...
2025-10-13T22:07:35.591Z [warning] [FileValidator] Invalid insight "Critical Configuration Files Missing": Evidence references non-existent file: app/layout.ts
2025-10-13T22:07:35.591Z [warning] [FileValidator] Invalid insight "Complex Route Logic: create": File not found: unknown
2025-10-13T22:07:35.591Z [warning] [FileValidator] Invalid insight "Optional Configuration Files Missing": File not found: app/globals.css, File not found: postcss.config.js
2025-10-13T22:07:35.591Z [warning] [InsightEngine] Removed 3 insights with invalid file references
2025-10-13T22:07:35.591Z [info] File Validation Report
========================
Total insights: 16
Valid insights: 13
Invalid insights: 3
Overall confidence: 91%

Validation Statistics:
----------------------
Total file paths tracked: 142
Cache entries: 34
Project root configured: ✅

Invalid Insights:
------------------
• Critical Configuration Files Missing
  - Evidence references non-existent file: app/layout.ts

• Complex Route Logic: create
  - File not found: unknown

• Optional Configuration Files Missing
  - File not found: app/globals.css
  - File not found: postcss.config.js

💡 Common Solutions:
--------------------
• Ensure the project path is correctly set during analysis
• Check that file patterns match your project structure
• Verify that referenced files exist in the analyzed directory
2025-10-13T22:07:35.591Z [info] [InsightEngine] Phase 7: Adding confidence scoring...
2025-10-13T22:07:35.591Z [warning] [InsightEngine] Filtered out 5 very low confidence insights
2025-10-13T22:07:35.592Z [info] [InsightEngine] Final result: 8 high-confidence insights
2025-10-13T22:07:35.592Z [info] [InsightEngine] Average confidence: 76%
2025-10-13T22:07:35.592Z [info] [ActionableInsightEngine] Generated 8 insights
2025-10-13T22:07:35.592Z [info] [ActionableInsightEngine] Creating sprint plan...
2025-10-13T22:07:35.592Z [info] [ActionableInsightEngine] Sprint plan created: 5 items
2025-10-13T22:07:35.592Z [info] [ActionableInsightEngine] Calculating summary...
2025-10-13T22:07:35.592Z [info] [ActionableInsightEngine] Summary: {
  critical: 0,
  high: 1,
  medium: 5,
  low: 2,
  totalDebtHours: 200,
  estimatedROI: 10850
}
2025-10-13T22:07:35.592Z [info] [ActionableInsightEngine] Returning complete result
2025-10-13T22:07:35.592Z [info] [InsightsAPI] Analysis complete! Generated 8 insights